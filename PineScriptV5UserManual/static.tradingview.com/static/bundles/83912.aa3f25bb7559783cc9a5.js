"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[83912],{583912:(e,t,i)=>{i.d(t,{linking:()=>v});var r=i(12481),n=i(650151),s=i(129025),o=i(77122),a=i(223699),l=i(444331),u=i(201089),c=i(62802),h=i(588948),d=i(776734),m=i(707621),_=i(912445),p=i(502141);const b=(0,u.getLogger)("Linking");class S{constructor(e,t,i){this.watchedSymbol=new s.WatchedValue,this.seriesShortSymbol=new s.WatchedValue,this.proSymbol=new s.WatchedValue,this.watchedInterval=new s.WatchedValue,this.watchedIntraday=new s.WatchedValue,this.watchedSeconds=new s.WatchedValue,this.watchedTicks=new s.WatchedValue,this.watchedDataFrequencyResolution=new s.WatchedValue,this.watchedRange=new s.WatchedValue,this.watchedSupportedResolutions=new s.WatchedValue,this.watchedSupportedChartStyles=new s.WatchedValue,this.symbolNamesList=new s.WatchedValue,this._chartWidgetCollection=null,this._chartWidgetBindingState=0,this._activeChartWidget=null,this._linkingGroupCharts=null,this._boundChartWidget=null,this._watchedSymbolListenerBound=this._watchedSymbolListener.bind(this),this._watchedIntervalListenerBound=this._watchedIntervalListener.bind(this),this._muted=!1,this.updateBoundChartWidget=()=>{const e=this._chartToBind();e!==this._boundChartWidget&&(null===e?this.unbindFromChartWidget():this.bindToChartWidget(e))},this._updateAllGroupChartWidgets=()=>{var e;null===(e=this._destroySymbolIntervalPropertySubscriptions)||void 0===e||e.call(this);const t=(0,n.ensureNotNull)(this._linkingGroupCharts).value(),i=[],r=[];for(const e of t){const t=e.symbolWV().spawn(),n=e.resolutionWV().spawn();t.subscribe(this._updateSymbolByProperty.bind(this,e)),n.subscribe(this._updateIntervalByProperty.bind(this,e)),i.push(t),r.push(n)}this._destroySymbolIntervalPropertySubscriptions=()=>{i.forEach((e=>e.destroy())),r.forEach((e=>e.destroy())),this._destroySymbolIntervalPropertySubscriptions=void 0};const s=this.watchedSymbol.value();t.length>1&&this._needApplySymbol(s)&&!this._muted&&this._setGroupSymbol(s);const o=this.watchedInterval.value();t.length>1&&this._needApplyInterval(o)&&!this._muted&&this._setGroupInterval(o),this.updateBoundChartWidget()},this._groupIndex=e;const r=(e,t)=>{e.subscribe((e=>{i()===this&&t.setValue(e)}),{callWithLast:!0})};r(this.watchedSymbol,t.watchedSymbol),r(this.seriesShortSymbol,t.seriesShortSymbol),r(this.proSymbol,t.proSymbol),r(this.watchedInterval,t.watchedInterval),r(this.watchedIntraday,t.watchedIntraday),r(this.watchedSeconds,t.watchedSeconds),r(this.watchedTicks,t.watchedTicks),r(this.watchedDataFrequencyResolution,t.watchedDataFrequencyResolution),r(this.watchedRange,t.watchedRange),r(this.watchedSupportedResolutions,t.watchedSupportedResolutions),r(this.watchedSupportedChartStyles,t.watchedSupportedChartStyles),r(this.symbolNamesList,t.symbolNamesList)}mute(e){this._muted=e}bindToChartWidgetCollection(e){this.unbindFromChartWidgetCollection(),this._chartWidgetCollection=e,this._activeChartWidget=e.activeChartWidget.spawn(),this._activeChartWidget.subscribe(this.updateBoundChartWidget),
this._linkingGroupCharts=e.linkingGroupsCharts(this._groupIndex).spawn(),this._linkingGroupCharts.subscribe(this._updateAllGroupChartWidgets),this.updateBoundChartWidget(),this._updateAllGroupChartWidgets()}unbindFromChartWidgetCollection(){var e,t,i;this.unbindFromChartWidget(),this._chartWidgetCollection=null,null===(e=this._activeChartWidget)||void 0===e||e.destroy(),this._activeChartWidget=null,null===(t=this._linkingGroupCharts)||void 0===t||t.destroy(),this._linkingGroupCharts=null,null===(i=this._destroySymbolIntervalPropertySubscriptions)||void 0===i||i.call(this)}bindToChartWidget(e){if(this.unbindFromChartWidget(),this._boundChartWidget=e,e.hasModel())return void this._onChartModelCreated(e.model());e.modelCreated().subscribe(this,this._onChartModelCreated),this._chartWidgetBindingState=1;const t=e.properties().childs().mainSeriesProperties.childs();this.watchedSymbol.setValue(t.symbol.value()),this.watchedInterval.setValue(t.interval.value()),this._boundChartWidget.linkingGroupIndex().subscribe(this.updateBoundChartWidget)}unbindFromChartWidget(){const e=this._boundChartWidget;if(null!==e){switch(this._chartWidgetBindingState){case 1:e.modelCreated().unsubscribe(this,this._onChartModelCreated);break;case 2:this.watchedSymbol.unsubscribe(this._watchedSymbolListenerBound),this._mainSeries().dataEvents().symbolResolved().unsubscribe(this,this._updateSeriesSymbolInfo),this._mainSeries().dataEvents().symbolError().unsubscribe(this,this._updateSeriesSymbolInfo),this.watchedInterval.unsubscribe(this._watchedIntervalListenerBound),delete this.watchedSymbol.hook,delete this.watchedSymbol.writeLock}e.linkingGroupIndex().unsubscribe(this.updateBoundChartWidget),this._boundChartWidget=null,this._chartWidgetBindingState=0}}boundChartWidget(){return this._boundChartWidget}_mainSeries(){if(!this._boundChartWidget)throw new Error("ChartWidget is undefined");return this._boundChartWidget.model().mainSeries()}_watchedSymbolListener(e){this._needApplySymbol(e)&&!this._muted&&(this._setGroupSymbol(e),this._sendSnowplowAnalytics())}_updateSymbolByProperty(e,t){const i=this._symbolLock();i&&this._needApplySymbol(t)&&!this._muted&&this._setGroupSymbol(t),(i||e===this._boundChartWidget)&&this.watchedSymbol.setValue(t)}_watchedIntervalListener(e){const t=a.Interval.normalize(e);t&&this._needApplyInterval(t)&&!this._muted&&this._setGroupInterval(t)}_updateIntervalByProperty(e,t){const i=this._intervalLock(),r=a.Interval.normalize(t);i&&r&&this._needApplyInterval(r)&&!this._muted&&this._setGroupInterval(r),(i||e===this._boundChartWidget)&&this.watchedInterval.setValue(null!=r?r:t)}_sendSnowplowAnalytics(){if(window.user.do_not_track)return;const e=this._mainSeries(),t=()=>{e.dataEvents().symbolResolved().unsubscribe(this,i)},i=i=>{(0,d.getTracker)().then((e=>{if(null===e)return;const t=(0,n.ensureNotNull)(this._chartWidgetCollection),r=t.layout.value(),s=t.metaInfo.uid.value()||"";e.trackChartSymbols(i.pro_name,i.type,r,s)})),e.dataEvents().symbolError().unsubscribe(this,t)};e.dataEvents().symbolResolved().subscribe(this,i,!0),
e.dataEvents().symbolError().subscribe(this,t,!0)}_updateSeriesSymbolInfo(){this.seriesShortSymbol.setValue((0,n.ensureNotNull)(this._boundChartWidget).getSymbol(!0));const e=this._mainSeries().symbolInfo();if(e){const t=e.pro_name||o.enabled("trading_terminal")&&(e.full_name||e.name)||"";this.proSymbol.setValue(t),e.aliases&&this.symbolNamesList.setValue(e.aliases);let i=(0,m.allChartStyles)();(0,l.isCloseBasedSymbol)(e)&&(i=i.filter((e=>(0,l.isSingleValueBasedStyle)(e)))),this.watchedSupportedChartStyles.setValue(i),this.watchedIntraday.setValue(!!e.has_intraday),this.watchedSeconds.setValue(!!e.has_seconds),this.watchedTicks.setValue(!(0,l.isCloseBasedSymbol)(e)&&!!e.has_ticks),this.watchedRange.setValue(!(0,l.isCloseBasedSymbol)(e));const r=e.data_frequency?e.data_frequency:void 0;this.watchedDataFrequencyResolution.setValue(r)}else this.watchedIntraday.deleteValue(),this.watchedSeconds.deleteValue(),this.watchedTicks.deleteValue(),this.watchedRange.deleteValue(),this.proSymbol.deleteValue()}_onChartModelCreated(e){if(!this._boundChartWidget)throw new Error("ChartWidget is undefined");this._chartWidgetBindingState=2,this._boundChartWidget.modelCreated().unsubscribe(this,this._onChartModelCreated),this.watchedSymbol.setValue(this._boundChartWidget.symbolWV().value()),this.watchedSymbol.subscribe(this._watchedSymbolListenerBound);const t=this._mainSeries();t.dataEvents().symbolResolved().subscribe(this,this._updateSeriesSymbolInfo),t.dataEvents().symbolError().subscribe(this,this._updateSeriesSymbolInfo),t.dataEvents().symbolNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),t.dataEvents().symbolGroupNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),this._updateSeriesSymbolInfo(),this.watchedInterval.setValue(this._boundChartWidget.resolutionWV().value()),this.watchedInterval.subscribe(this._watchedIntervalListenerBound),this._boundChartWidget.readOnly()&&(this.watchedSymbol.writeLock=!0)}_chartToBind(){var e;const t=this._chartWidgetCollection;return null===t?null:t.activeChartWidget.value().linkingGroupIndex().value()===this._groupIndex?t.activeChartWidget.value():null!==this._boundChartWidget&&this._boundChartWidget.linkingGroupIndex().value()===this._groupIndex?this._boundChartWidget:null!==(e=t.getAll().find((e=>e.linkingGroupIndex().value()===this._groupIndex)))&&void 0!==e?e:null}_symbolLock(){var e;return!!(null===(e=this._chartWidgetCollection)||void 0===e?void 0:e.lock.symbol.value())}_intervalLock(){var e;return!!(null===(e=this._chartWidgetCollection)||void 0===e?void 0:e.lock.interval.value())}_chartsForLock(e){return(0===e?this._symbolLock():this._intervalLock())?(0,n.ensureNotNull)(this._linkingGroupCharts).value():this._boundChartWidget?[this._boundChartWidget]:[]}_setGroupSymbol(e){this.mute(!0),this._symbolLock()?(0,n.ensureNotNull)(this._chartWidgetCollection).setSymbol(e,this._groupIndex):(0,n.ensureNotNull)(this._boundChartWidget).setSymbol(e),this.mute(!1)}_needApplySymbol(e){
const t=this._chartsForLock(0),i=t.find((t=>t.hasModel()&&t.model().mainSeries().symbolInfo()&&t.model().mainSeries().symbolSameAsCurrent(e)));if(i){const e=i.model().mainSeries().symbolInfo();if(t.every((t=>(0,p.symbolSameAsCurrent)(t.symbolWV().value(),e))))return!1}return t.some((t=>t.symbolWV().value()!==e))}_setGroupInterval(e){this.mute(!0),this._intervalLock()?(0,n.ensureNotNull)(this._chartWidgetCollection).setResolution(e,this._groupIndex):(0,n.ensureNotNull)(this._boundChartWidget).setResolution(e),this.mute(!1)}_needApplyInterval(e){return this._chartsForLock(1).some((t=>!a.Interval.isEqual(t.resolutionWV().value(),e)))}}const v=new class{constructor(){this._watchedSymbol=new s.WatchedValue,this._seriesShortSymbol=new s.WatchedValue,this._proSymbol=new s.WatchedValue,this._watchedInterval=new s.WatchedValue,this._watchedIntraday=new s.WatchedValue,this._watchedSeconds=new s.WatchedValue,this._watchedTicks=new s.WatchedValue,this._watchedDataFrequencyResolution=new s.WatchedValue,this._watchedRange=new s.WatchedValue,this._watchedSupportedResolutions=new s.WatchedValue,this._watchedSupportedChartStyles=new s.WatchedValue([]),this._symbolNamesList=new s.WatchedValue,this._chartWidgetCollection=null,this._onSymbolLinkBound=this._onSymbolLink.bind(this),this._searchCharts=null,this._searchChartsLoadDebounced=null,this._selfEmit=!1,this._preventFeedBySymbol=!1,this._feedBySymbolDebounceCounter=0,this._linkingGroups=new Map,this._activeLinkingGroup=new s.WatchedValue,this._activeLinkingGroupIndex=null,this._updateLinkingGroups=()=>{(0,n.ensureNotNull)(this._chartWidgetCollection).allLinkingGroups().value().forEach((e=>this._linkingGroup(e))),this._linkingGroups.forEach((e=>e.updateBoundChartWidget()))},this._activeLinkingGroup.setValue(this._linkingGroup(null));const e=(e,t)=>{e.subscribe((e=>t().setValue(e)),{callWithLast:!0})};e(this._watchedSymbol,(()=>this._activeLinkingGroup.value().watchedSymbol)),e(this._seriesShortSymbol,(()=>this._activeLinkingGroup.value().seriesShortSymbol)),e(this._proSymbol,(()=>this._activeLinkingGroup.value().proSymbol)),e(this._watchedInterval,(()=>this._activeLinkingGroup.value().watchedInterval)),e(this._watchedIntraday,(()=>this._activeLinkingGroup.value().watchedIntraday)),e(this._watchedSeconds,(()=>this._activeLinkingGroup.value().watchedSeconds)),e(this._watchedTicks,(()=>this._activeLinkingGroup.value().watchedTicks)),e(this._watchedDataFrequencyResolution,(()=>this._activeLinkingGroup.value().watchedDataFrequencyResolution)),e(this._watchedRange,(()=>this._activeLinkingGroup.value().watchedRange)),e(this._watchedSupportedResolutions,(()=>this._activeLinkingGroup.value().watchedSupportedResolutions)),e(this._watchedSupportedChartStyles,(()=>this._activeLinkingGroup.value().watchedSupportedChartStyles)),e(this._symbolNamesList,(()=>this._activeLinkingGroup.value().symbolNamesList));const t=e=>{this._watchedSymbol.setValue(e.watchedSymbol.value()),this._seriesShortSymbol.setValue(e.seriesShortSymbol.value()),this._proSymbol.setValue(e.proSymbol.value()),
this._watchedInterval.setValue(e.watchedInterval.value()),this._watchedIntraday.setValue(e.watchedIntraday.value()),this._watchedSeconds.setValue(e.watchedSeconds.value()),this._watchedTicks.setValue(e.watchedTicks.value()),this._watchedDataFrequencyResolution.setValue(e.watchedDataFrequencyResolution.value()),this._watchedRange.setValue(e.watchedRange.value()),this._watchedSupportedResolutions.setValue(e.watchedSupportedResolutions.value()),this._watchedSupportedChartStyles.setValue(e.watchedSupportedChartStyles.value()),this._symbolNamesList.setValue(e.symbolNamesList.value())};this._activeLinkingGroup.subscribe(t),t(this._activeLinkingGroup.value()),(0,_.setMuteLinkingGroup)(((e,t)=>{this._linkingGroup(e).mute(t)}))}get symbol(){return this._watchedSymbol}get proSymbol(){return this._proSymbol}get symbolNamesList(){return this._symbolNamesList}get seriesShortSymbol(){return this._seriesShortSymbol.readonly()}get interval(){return this._watchedInterval}get intraday(){return this._watchedIntraday.readonly()}get seconds(){return this._watchedSeconds.readonly()}get ticks(){return this._watchedTicks.readonly()}get range(){return this._watchedRange.readonly()}get supportedResolutions(){return this._watchedSupportedResolutions.readonly()}get supportedChartStyles(){return this._watchedSupportedChartStyles.readonly()}get preventFeedBySymbol(){return this._preventFeedBySymbol}get dataFrequencyResolution(){return this._watchedDataFrequencyResolution.readonly()}activeLinkingGroup(){return this._activeLinkingGroup.readonly()}getChartWidget(){return this.activeLinkingGroup().value().boundChartWidget()}bindToChartWidgetCollection(e){var t;null===(t=this._chartWidgetCollection)||void 0===t||t.onAboutToBeDestroyed.unsubscribeAll(this),this._unbindFromChartWidgetCollection(),this._chartWidgetCollection=e,this._chartWidgetCollection.onAboutToBeDestroyed.subscribe(this,this._unbindFromChartWidgetCollection),this._chartWidgetCollection.allLinkingGroups().subscribe(this._updateLinkingGroups),this._updateLinkingGroups(),this._activeLinkingGroupIndex=e.activeLinkingGroup().spawn(),this._activeLinkingGroupIndex.subscribe((e=>{this._activeLinkingGroup.setValue(this._linkingGroup(e))}),{callWithLast:!0}),this._linkingGroups.forEach((t=>t.bindToChartWidgetCollection(e)))}bindToSearchCharts(e){this.unbindFromSearchCharts(),this._searchCharts=e,e.onSearchBySymbol.subscribe(this,this._onSearchBySymbol),e.loadingSymbol.subscribe((e=>{!1===e&&(this._feedBySymbolDebounceCounter=0)})),this._watchedSymbol.subscribe(this._onSymbolLinkBound)}unbindFromSearchCharts(){this._searchCharts&&(this._searchCharts.onSearchBySymbol.unsubscribe(this,this._onSearchBySymbol),this._watchedSymbol.unsubscribe(this._onSymbolLinkBound),this._searchCharts=null)}setPreventFeedBySymbol(e){this._preventFeedBySymbol=e}_onSearchBySymbol(e){if(!e.resolved_symbol)throw new Error("no resolved_symbol");this._selfEmit=!0,this._watchedSymbol.setValue(e.resolved_symbol),this._selfEmit=!1}_onSymbolLink(e){if(!this._selfEmit){if(!this._searchCharts){const e="No search charts defined"
;throw b.logError(e),new Error(e)}this._preventFeedBySymbol||this._loadSearchCharts(e)}}_loadSearchCharts(e){if(!this._searchCharts){const e="No search charts defined";throw b.logError(e),new Error(e)}if(this._searchChartsLoadDebounced)return void(this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced(e)));const t=e=>this._searchCharts?(!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=(0,r.default)(t,2e3),this._searchChartsLoadDebounced(e)):this._searchChartsLoadDebounced=null,this._searchCharts.feedBySymbol.call(this._searchCharts,e)):()=>{};!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=(0,r.default)(t,2e3),this._searchChartsLoadDebounced(e)):this._searchCharts.feedBySymbol(e)}_linkingGroup(e){let t=this._linkingGroups.get(e);if(void 0===t){const i={watchedSymbol:this._watchedSymbol,seriesShortSymbol:this._seriesShortSymbol,proSymbol:this._proSymbol,watchedInterval:this._watchedInterval,watchedIntraday:this._watchedIntraday,watchedSeconds:this._watchedSeconds,watchedTicks:this._watchedTicks,watchedDataFrequencyResolution:this._watchedDataFrequencyResolution,watchedRange:this._watchedRange,watchedSupportedResolutions:this._watchedSupportedResolutions,watchedSupportedChartStyles:this._watchedSupportedChartStyles,symbolNamesList:this._symbolNamesList};t=new S(e,i,(()=>this._activeLinkingGroup.value())),this._linkingGroups.set(e,t),this._chartWidgetCollection&&t.bindToChartWidgetCollection(this._chartWidgetCollection)}return t}_unbindFromChartWidgetCollection(){var e;null!==this._chartWidgetCollection&&(null===(e=this._activeLinkingGroupIndex)||void 0===e||e.destroy(),this._activeLinkingGroupIndex=null,this._linkingGroups.forEach((e=>e.unbindFromChartWidgetCollection())),this._chartWidgetCollection.allLinkingGroups().unsubscribe(this._updateLinkingGroups),this._chartWidgetCollection=null)}};{const e=(0,h.getFreshInitData)().symbolInfo,t=e?e.pro_symbol:c.getValue("editchart.model.symbol",window.DEFAULT_SYMBOL);v.symbol.setValue(t)}window.TradingViewApi||(window.TradingViewApi={linking:v})},912445:(e,t,i)=>{let r;function n(e,t){null==r||r(e,t)}function s(e){r=e}i.d(t,{muteLinkingGroup:()=>n,setMuteLinkingGroup:()=>s})},66732:(e,t,i)=>{i.d(t,{combine:()=>o,combineWithFilteredUpdate:()=>s});var r=i(129025);function n(e,t,...i){const n=(...t)=>e(...t.map((e=>e.value()))),s=new r.WatchedValue(n(...i)),o=()=>{t(...i.map((e=>e.value())))&&s.setValue(n(...i))},a=i.map((e=>e.spawn()));for(const e of a)e.subscribe(o);return s.readonly().spawn((()=>{a.forEach((e=>e.destroy())),i.forEach((e=>e.release()))}))}function s(e,t,...i){return n(e,t,...i)}function o(e,...t){return n(e,(()=>!0),...t)}},667353:(e,t,i)=>{i.d(t,{numOfDecimalPlaces:()=>n});var r=i(960521);function n(e){return(new r.Big(e).toFixed().split(".")[1]||"").length}},181728:(e,t,i)=>{function r(e,t){
return(null==t?void 0:t.includes("cfd"))&&["commodity","futures","index","stock","fund"].includes(e)||"cfd"===e}function n(e,t){return"futures"===e&&void 0!==t&&!t.includes("cfd")}function s(e,t){return"stock"===e&&void 0!==t&&!t.includes("cfd")}function o(e,t){return void 0!==t&&("index"===e&&!t.includes("cfd")||"fundamental"===e&&t.includes("crypto"))}i.d(t,{isCFDSymbol:()=>r,isFuturesSymbol:()=>n,isIndexSymbol:()=>o,isStockSymbol:()=>s})},217504:(e,t,i)=>{i.d(t,{getMinTick:()=>u,getMinTickData:()=>l,makePriceIndexToPriceConverter:()=>m,makePriceToPriceIndexConverter:()=>d,makeVariableMinTickData:()=>h});var r=i(960521),n=i(150335),s=i(389137),o=i(667353);function a(e){return e?e.minMove/e.priceScale:NaN}function l(e){const{minTick:t,price:i,variableMinTickData:r,shouldCheckForEquality:s}=e,o=(0,n.isNumber)(t)?c(t):t;return void 0===r?o:function(e,t,i=!1){for(let r=0;r<t.length;r++){if(e<t[r].price)return t[r].minTick;if(i&&e===t[r].price)return t[r].minTick}return t[t.length-1].minTick}(i,r,s)}function u(e){return a(l(e))}function c(e){const t=(0,o.numOfDecimalPlaces)(e),i=Math.pow(10,t);return{priceScale:i,minMove:(0,r.Big)(e).mul(i).toNumber()}}function h(e,t){var i,o,l,u,h;const d=[{minTick:(0,n.isNumber)(e)?c(e):e,price:1/0,maxIndex:1/0}];try{const e=t.split(" ").map(((e,t)=>(0,s.isEven)(t)?function(e){const t=Number(e);if(Number.isFinite(t))return c(t);{const t=e.split("/");if(t.length<2||t.length>3)throw new Error(`Unexpected mintick: ${e}`);const i=Number(t[1]),r=Number(t[0]);if(!Number.isFinite(i)||!Number.isFinite(r))throw new Error(`Unexpected mintick: ${e}`);const n=3===t.length?Number(t[2]):void 0;if(void 0!==n&&!Number.isFinite(n))throw new Error(`Unexpected mintick: ${e}`);const s={priceScale:i,minMove:r};return void 0!==n&&(s.minMove2=n),s}}(e):function(e){const t=Number(e);if(Number.isNaN(t))throw new Error(`Unexpected price limit: ${e}`);return t}(e)));if((0,s.isEven)(e.length))throw new Error("Theme must not be event number of elements");const n=[];for(let t=0;t<e.length;t+=2){const s=null!==(i=e[t+1])&&void 0!==i?i:1/0,c=null!==(l=null===(o=n[n.length-1])||void 0===o?void 0:o.price)&&void 0!==l?l:0,d=null!==(h=null===(u=n[n.length-1])||void 0===u?void 0:u.maxIndex)&&void 0!==h?h:0,m=s===1/0?1/0:new r.Big(s).minus(c).div(a(e[t])).plus(d).toNumber();n.push({minTick:e[t],price:s,maxIndex:m})}return n}catch(e){return d}}function d(e,t){return i=>{var n,s,o,l;if(!Number.isFinite(i))return NaN;if(void 0===t)return new r.Big(i).div(e).round().toNumber();for(let e=0;e<t.length;e++){const{price:u,minTick:c}=t[e],h=null!==(s=null===(n=t[e-1])||void 0===n?void 0:n.price)&&void 0!==s?s:0,d=null!==(l=null===(o=t[e-1])||void 0===o?void 0:o.maxIndex)&&void 0!==l?l:0;if(i<u)return new r.Big(i).minus(h).div(a(c)).plus(d).round().toNumber()}return NaN}}function m(e,t){return i=>{var n,s,o,l;if(!Number.isFinite(i))return NaN;if(void 0===t)return(0,r.Big)(i).mul(e).toNumber();for(let e=0;e<t.length;e++){
const{maxIndex:u,minTick:c}=t[e],h=null!==(s=null===(n=t[e-1])||void 0===n?void 0:n.price)&&void 0!==s?s:0,d=null!==(l=null===(o=t[e-1])||void 0===o?void 0:o.maxIndex)&&void 0!==l?l:0;if(i<u)return new r.Big(i).minus(d).mul(a(c)).plus(h).toNumber()}return NaN}}},707621:(e,t,i)=>{i.d(t,{allChartStyles:()=>o,commonChartStyles:()=>s,japaneseChartStyles:()=>n});var r=i(77122);function n(){const e=[8];return r.enabled("japanese_chart_styles")&&(e.push(4,7,5,6),e.push(11)),e}function s(){const e=[0,1,9,13,2,14,15,3,16,10];return e.push(12),e}function o(){return s().concat(n())}},702053:(e,t,i)=>{i.d(t,{formatterOptions:()=>n,numberToStringWithLeadingZero:()=>s});var r=i(389137);const n={decimalSign:".",decimalSignFractional:"'"};function s(e,t){if(!(0,r.isNumber)(e))return"n/a";if(!(0,r.isInteger)(t))throw new TypeError("invalid length");if(t<0||t>24)throw new TypeError("invalid length");if(0===t)return e.toString();return("0000000000000000"+e.toString()).slice(-t)}},182436:(e,t,i)=>{i.d(t,{NumericFormatter:()=>s});var r=i(960521),n=i(702053);class s{constructor(e){this._precision=e}format(e){return(void 0!==this._precision?e.toFixed(this._precision):s.formatNoE(e)).replace(".",n.formatterOptions.decimalSign)}parse(e){const t=e.replace(n.formatterOptions.decimalSign,".");let i=parseFloat(t);return this._precision&&(i=+i.toFixed(this._precision)),i}static formatNoE(e){if(!Number.isFinite(e))return String(e);const t=new r.Big(e);return t.lt(1)?t.toFixed():t.toString()}}},541346:(e,t,i)=>{i.d(t,{PercentageFormatter:()=>s});var r=i(402084),n=i(31341);class s extends r.PriceFormatter{constructor(e){super(e),this.type="percentage"}state(){const e=r.PriceFormatter.prototype.state.call(this);return e.percent=!0,e}parse(e){return e=e.replace("%",""),super.parse(e)}format(e,t,i,r,s=!0){const o=super.format(e,t,i,r,!1)+"%";return s?(0,n.forceLTRStr)(o):o}static serialize(e){return e.state()}static deserialize(e){return new s(e.priceScale)}}},402084:(e,t,i)=>{i.d(t,{PriceFormatter:()=>w,isFormatterHasForexAdditionalPrecision:()=>f});var r=i(389137),n=i(960521),s=i(201089),o=i(650151),a=i(444372),l=i(217504),u=i(31341);const c=new RegExp(/^(-?)[0-9]+$/);function h(e,t,i,r){let n=0;if(e>0&&t>0){let t=e;for(i&&r&&(t/=r);t>1;)t/=10,n++}return n}function d(e,t,i){const r=(0,o.ensureNotNull)((0,l.getMinTickData)({price:i,minTick:null,variableMinTickData:t,shouldCheckForEquality:!0})),{priceScale:n,minMove:s,minMove2:a}=r;return{priceScale:n,minMove:s,fractionalLength:h(n,s,e,a)}}class m{constructor(e,t,r,n,s,o){this._formatterErrors={custom:a.t(null,void 0,i(332061)),fraction:a.t(null,void 0,i(142015)),secondFraction:a.t(null,void 0,i(643247))},this._priceScale=e,this._minMove=t,this._minMove2=r,this._ignoreMinMove=s,this._variableMinTickData=void 0===n?void 0:(0,l.makeVariableMinTickData)({priceScale:e,minMove:t,minMove2:r},n),this._fractionalLength=o}formatImpl(e,t,i,r=!0,n=!0,s=!1,o){let a="";e<0?a=!1===r?"":"−":e&&!0===t&&(a="+");const l=a+this._formatUnsigned(Math.abs(e),i,s,o);return n?(0,u.forceLTRStr)(l):l}parse(e){
return"+"===(e=(e=(0,u.stripLTRMarks)(e)).replace("−","-"))[0]&&(e=e.substring(1)),this._parseUnsigned(e)}_removeEndingZeros(e,t){for(let i=0;i<t&&"0"===e[e.length-1];i++)e=e.substring(0,e.length-1);return e}}var _=i(702053);const p=new Map;const b=new Map;const S=(0,s.getLogger)("Chart.DecimalPriceFormatter");class v extends m{constructor(e,t,i,r,n,s){super(e,t,i,r,n,s),void 0!==i&&10!==i&&0!==i&&1!==i&&S.logDebug("invalid minmove2")}hasForexAdditionalPrecision(){return 10===this._minMove2}_parseUnsigned(e){return this._parseAsDecimal(e)}_formatUnsigned(e,t,i,r){const n={price:Math.abs(e),priceScale:this._priceScale,minMove:this._minMove,fractionalLength:this._fractionalLength,tailSize:t,cutFractionalByPrecision:i};return void 0!==this._variableMinTickData&&(Object.assign(n,d(!1,this._variableMinTickData,null!=r?r:n.price)),this._ignoreMinMove&&(n.minMove=1)),this._formatAsDecimal(n)}_formatAsExponential(e){const t=Math.floor(.75*Math.log10(this._priceScale)),i=e*Math.pow(10,t),r=`e-${t}`,n=Math.log10(this._priceScale)-t;return`${i.toFixed(n).replace(".",_.formatterOptions.decimalSign)}${r}`}_formatAsDecimal(e){const{price:t,priceScale:i,minMove:r,fractionalLength:s=0,tailSize:o=0,cutFractionalByPrecision:a}=e;if(i>1e15)return this._formatAsExponential(t);const l=Math.pow(10,o)*i/(a?1:r),u=1/l;let c;if(l>1)c=Math.floor(t);else{const e=Math.floor(Math.round(t/u)*u);c=0===Math.round((t-e)/u)?e:e+u}let h="";if(l>1){let e=a?new n.Big(t).mul(l).round(void 0,0).minus(new n.Big(c).mul(l)).toNumber():parseFloat((Math.round(t*l)-c*l).toFixed(s));e>=l&&(e-=l,c+=1);const i=a?new n.Big(e).round(s,0).toNumber():parseFloat(e.toFixed(s))*r;h=_.formatterOptions.decimalSign+(0,_.numberToStringWithLeadingZero)(i,s+o),h=this._removeEndingZeros(h,o)}return c.toString()+h}_parseAsDecimal(e){if(e.includes("e")){if(function(e){let t=p.get(e);return t||(t=new RegExp("^(-?)[0-9]+\\"+e+"[0-9]*e(-?)[0-9]+$"),p.set(e,t)),t}(_.formatterOptions.decimalSign).exec(e)){const t=parseFloat(e.replace(_.formatterOptions.decimalSign,"."));return{value:t,res:!0,suggest:this.formatImpl(t)}}return{error:this._formatterErrors.custom,res:!1}}let t=c.exec(e);if(t){const t=parseFloat(e);return{value:t,res:!0,suggest:this.formatImpl(t)}}if(t=function(e){let t=b.get(e);return t||(t=new RegExp("^(-?)[0-9]+\\"+_.formatterOptions.decimalSign+"[0-9]*$"),b.set(e,t)),t}(_.formatterOptions.decimalSign).exec(e),t){const t=parseFloat(e.replace(_.formatterOptions.decimalSign,"."));return{value:t,res:!0,suggest:this.formatImpl(t)}}return{error:this._formatterErrors.custom,res:!1}}}const g=(0,s.getLogger)("Chart.FractionalPriceFormatter");class y extends m{constructor(e,t,i,r,n,s){super(e,t,i,r,n,s),void 0!==i&&i>0&&2!==i&&4!==i&&8!==i&&g.logDebug("invalid minmove2")}hasForexAdditionalPrecision(){return!1}_parseUnsigned(e){return this._minMove2?this._parseAsDoubleFractional(e):this._parseAsSingleFractional(e)}_formatUnsigned(e,t,i,r){const n={price:Math.abs(e),priceScale:this._priceScale,minMove:this._minMove,minMove2:this._minMove2,fractionalLength:(0,
o.ensureDefined)(this._fractionalLength),tailSize:t};return void 0!==this._variableMinTickData&&Object.assign(n,d(!0,this._variableMinTickData,null!=r?r:n.price)),this._formatAsFractional(n)}_parseAsSingleFractional(e){let t=c.exec(e);if(t){const t=parseFloat(e);return{value:t,res:!0,suggest:this.formatImpl(t)}}if(t=new RegExp("^(-?)([0-9]+)\\"+_.formatterOptions.decimalSignFractional+"([0-9]+)$").exec(e),t){const e=!!t[1],i=parseInt(t[2]),r=this._priceScale,n=this._patchFractPart(parseInt(t[3]),1,r);if(n>=r||n<0)return{error:this._formatterErrors.fraction,res:!1};let s=i+n/r;return e&&(s=-s),{value:s,res:!0,suggest:this.formatImpl(s)}}return{error:this._formatterErrors.custom,res:!1}}_parseAsDoubleFractional(e){let t=c.exec(e);if(t){const t=parseFloat(e);return{value:t,res:!0,suggest:this.formatImpl(t)}}if(t=new RegExp("^(-?)([0-9]+)\\"+_.formatterOptions.decimalSignFractional+"([0-9]+)\\"+_.formatterOptions.decimalSignFractional+"([0-9]+)$").exec(e),t){const e=!!t[1],i=parseInt(t[2]),r=void 0!==this._minMove2?this._minMove2:NaN,n=this._priceScale/r,s=this._minMove2,o=this._patchFractPart(parseInt(t[3]),1,n),a=this._patchFractPart(parseInt(t[4]),2,s);if(o>=n||o<0)return{error:this._formatterErrors.fraction,res:!1};if(void 0!==s&&a>=s||a<0)return{error:this._formatterErrors.secondFraction,res:!1};let l=void 0!==s?i+o/n+a/(n*s):NaN;return e&&(l=-l),{value:l,res:!0,suggest:this.formatImpl(l)}}return{error:this._formatterErrors.custom,res:!1}}_patchFractPart(e,t,i){const r={0:0,5:1},n={0:0,2:1,5:2,7:3},s={0:0,1:1,2:2,3:3,5:4,6:5,7:6,8:7};return 2===i?void 0===r[e]?-1:r[e]:4===i?void 0===n[e]?-1:n[e]:8===i&&2===t?void 0===s[e]?-1:s[e]:e}_formatAsFractional(e){const{price:t,tailSize:i,priceScale:r,minMove:n,minMove2:s,fractionalLength:o}=e,a=r/n;let l=Math.floor(t),u=i?Math.floor(t*a)-l*a:Math.round(t*a)-l*a;u===a&&(u=0,l+=1);let c="";if(i){let e=(t-l-u/a)*a;e=Math.round(e*Math.pow(10,i)),c=(0,_.numberToStringWithLeadingZero)(e,i),c=this._removeEndingZeros(c,i)}if(!o)throw new Error("_fractionalLength is not calculated");let h="";if(s){const e=u%s;u=(u-e)/s;const t=(0,_.numberToStringWithLeadingZero)(u,o),i=this._getFractPart(e,2,s);h=t+_.formatterOptions.decimalSignFractional+i}else u=this._getFractPart(u,1,r),h=(0,_.numberToStringWithLeadingZero)(u*n,o);return l.toString()+_.formatterOptions.decimalSignFractional+h+c}_getFractPart(e,t,i){const r=[0,5],n=[0,2,5,7],s=[0,1,2,3,5,6,7,8];return 2===i?void 0===r[e]?-1:r[e]:4===i?void 0===n[e]?-1:n[e]:8===i&&2===t?void 0===s[e]?-1:s[e]:e}}function f(e){return"hasForexAdditionalPrecision"in e}class w{constructor(e,t,i,n,s,o){if(this.type="price",t&&!o||(t=1),(0,r.isNumber)(e)&&(0,r.isInteger)(e)||(e=100),e<0)throw new TypeError("invalid base");this._priceScale=e,this._minMove=t,this._minMove2=n,this._fractional=i,this._variableMinTick=s,this._ignoreMinMove=o,this._fractionalLength=h(this._priceScale,this._minMove,this._fractional,this._minMove2),this._implementation=i?new y(e,t,n,s,o,this._fractionalLength):new v(e,t,n,s,o,this._fractionalLength)}isFractional(){
return!!this._fractional}state(){return{minMove:this._minMove,minMove2:this._minMove2,priceScale:this._priceScale,variableMinTick:this._variableMinTick,ignoreMinMove:this._ignoreMinMove,fractional:this._fractional,fractionalLength:this._fractionalLength}}formatChange(e,t,i){return this._implementation.formatImpl(e-t,i,void 0,void 0,void 0,void 0,Math.min(Math.abs(e),Math.abs(t)))}format(e,t,i,r=!0,n=!0,s=!1){return this._implementation.formatImpl(e,t,i,r,n,s)}parse(e){return this._implementation.parse(e)}hasForexAdditionalPrecision(){return this._implementation.hasForexAdditionalPrecision()}static serialize(e){return e.state()}static deserialize(e){return new w(e.priceScale,e.minMove,e.fractional,e.minMove2,e.variableMinTick,e.ignoreMinMove)}}},943994:(e,t,i)=>{i.d(t,{NOT_AVAILABLE_VOLUME_FORMATTER:()=>a,PLACE_HOLDER:()=>o,VolumeFormatter:()=>l});var r=i(444372),n=i(182436),s=i(389137);const o="---",a=1e100;class l{constructor(e){this.type="volume",this._numericFormatter=new n.NumericFormatter,this._fractionalValues=void 0!==e&&e>0,this._precision=e}state(){return{precision:this._precision}}format(e,t){if(!(0,s.isNumber)(e))return o;let n="";return e<0?(n="−",e=-e):e>0&&t&&(n="+"),e>=a?r.t(null,void 0,i(343088)):(!this._fractionalValues||e>=995?e=Math.round(e):this._fractionalValues&&(e=+e.toFixed(this._precision)),e<995?n+this._formatNumber(e):e<999995?n+this._formatNumber(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this._formatNumber(e/1e6)+"M"):e<999999999995?(e=1e6*Math.round(e/1e6),n+this._formatNumber(e/1e9)+"B"):(e=1e9*Math.round(e/1e9),n+this._formatNumber(e/1e12)+"T"))}parse(e){if("---"===e)return{error:"not a number",res:!1,value:NaN};const t={K:1e3,M:1e6,B:1e9,T:1e12},i=e.slice(-1);if(t.hasOwnProperty(i)){const r=this._numericFormatter.parse(e.slice(0,-1));return(0,s.isNumber)(r)?{res:!0,value:r*t[i]}:{error:"not a number",res:!1,value:NaN}}{const t=this._numericFormatter.parse(e);return(0,s.isNumber)(t)?{res:!0,value:t}:{error:"not a number",res:!1,value:NaN}}}static serialize(e){return e.state()}static deserialize(e){return new l(e.precision)}_formatNumber(e){if(this._fractionalValues&&0!==e){const t=14-Math.ceil(Math.log10(e)),i=Math.pow(10,t);e=Math.round(e*i)/i}return this._numericFormatter.format(e).replace(/(\.[1-9]*)0+$/,((e,t)=>t))}}},824837:(e,t,i)=>{i.d(t,{createWVFromGetterAndSubscription:()=>n});var r=i(129025);function n(e,t){const i=new r.WatchedValue(e()),n={};t.subscribe(n,(()=>{i.setValue(e())}));return i.readonly().spawn((()=>t.unsubscribeAll(n)))}},339315:(e,t,i)=>{i.r(t),i.d(t,{SERIES_STATUS_TEXT:()=>b,STATUS_DELAYED:()=>h,STATUS_DELAYED_STREAMING:()=>d,STATUS_EOD:()=>u,STATUS_ERROR:()=>p,STATUS_INVALID_SYMBOL:()=>a,STATUS_LOADING:()=>s,STATUS_NO_BARS:()=>m,STATUS_OFFLINE:()=>r,STATUS_PULSE:()=>c,STATUS_READY:()=>o,STATUS_REPLAY:()=>_,STATUS_RESOLVING:()=>n,STATUS_SNAPSHOT:()=>l,STYLE_AREA:()=>y,STYLE_BARS:()=>S,STYLE_BASELINE:()=>W,STYLE_CANDLES:()=>v,STYLE_COLUMNS:()=>M,STYLE_HEIKEN_ASHI:()=>k,STYLE_HILO:()=>E,STYLE_HLC_AREA:()=>V,STYLE_HOLLOW_CANDLES:()=>T,STYLE_KAGI:()=>w,
STYLE_LINE:()=>g,STYLE_LINE_WITH_MARKERS:()=>F,STYLE_PB:()=>L,STYLE_PNF:()=>C,STYLE_RANGE:()=>I,STYLE_RENKO:()=>f,STYLE_SHORT_NAMES:()=>A,STYLE_STEPLINE:()=>N,SYMBOL_STRING_DATA:()=>B});const r=0,n=1,s=2,o=3,a=4,l=5,u=6,c=7,h=8,d=9,m=10,_=11,p=12,b={[r]:"connecting",[n]:"loading",[s]:"loading",[o]:"realtime",[a]:"invalid",[l]:"snapshot",[u]:"endofday",[c]:"endofday",[h]:"delayed",[d]:"delayed_streaming",[m]:"forbidden",[_]:"replay",[p]:"error"},S=0,v=1,g=2,y=3,f=4,w=5,C=6,L=7,k=8,T=9,W=10,I=11,E=12,M=13,F=14,N=15,V=16,A={0:"bar",1:"candle",9:"hollowCandle",2:"line",14:"lineWithMarkers",15:"stepline",3:"area",16:"hlcArea",4:"renko",7:"pb",5:"kagi",6:"pnf",8:"ha",10:"baseline",11:"range",12:"hilo",13:"column"},B={4:{type:"BarSetRenko@tv-prostudies",basicStudyVersion:64},7:{type:"BarSetPriceBreak@tv-prostudies",basicStudyVersion:34},5:{type:"BarSetKagi@tv-prostudies",basicStudyVersion:34},6:{type:"BarSetPnF@tv-prostudies",basicStudyVersion:34},8:{type:"BarSetHeikenAshi@tv-basicstudies",basicStudyVersion:60},11:{type:"BarSetRange@tv-basicstudies",basicStudyVersion:72}}},444331:(e,t,i)=>{i.r(t),i.d(t,{actualSymbol:()=>de,chartStyleStudyId:()=>P,createSeriesFormatter:()=>z,displayedSymbolExchange:()=>he,displayedSymbolName:()=>ce,extractSymbolNameFromSymbolInfo:()=>ae,getChartStyleByResolution:()=>D,getDefaultStyle:()=>G,getLastUsedRawDataStyle:()=>x,getLastUsedSingleValueBasedStyle:()=>R,getLastUsedStyle:()=>B,getSeriesDisplayErrorWV:()=>Le,getSeriesPriceFormattingState:()=>$,getStudySymbolExchange:()=>fe,getTranslatedChartStyleName:()=>k,hasProjection:()=>Y,hasVolume:()=>ge,isCloseBasedSymbol:()=>be,isConvertedToOtherCurrency:()=>X,isConvertedToOtherUnit:()=>te,isEconomicSymbol:()=>ye,isFutureContinuousSymbolWithBackajustment:()=>we,isFuturesContractSymbol:()=>Ce,isMeasureUnitSymbol:()=>Se,isPriceSourceStyle:()=>q,isRangeBasedStyle:()=>W,isRangeStyle:()=>I,isRawDataStyle:()=>N,isRegularSessionId:()=>pe,isRequiringRestartSeriesStyles:()=>T,isSingleValueBasedStyle:()=>F,isTimeBasedStyle:()=>E,isValidStyle:()=>M,measureUnitId:()=>ve,preparePriceAxisProperties:()=>O,proSymbol:()=>me,setLastUsedRawDataStyle:()=>A,setLastUsedStyle:()=>V,symbolBaseCurrency:()=>K,symbolCurrency:()=>j,symbolCurrencyConvertible:()=>H,symbolCurrentContract:()=>re,symbolForApi:()=>_e,symbolHasEconomicEvents:()=>oe,symbolHasPreOrPostMarket:()=>ne,symbolHasSeveralSessions:()=>se,symbolOriginalCurrency:()=>Z,symbolOriginalUnit:()=>ee,symbolTitle:()=>ue,symbolTitleSeparator:()=>le,symbolUnit:()=>Q,symbolUnitConvertible:()=>J,symbolUnitConvertibleGroupsIfExist:()=>ie});var r=i(444372),n=i(62802),s=i(519073),o=i(339315),a=i(223699),l=i(402084),u=i(77122),c=i(650151),h=i(943994),d=i(541346),m=i(181728),_=i(66732),p=i(824837)
;const b=u.enabled("pay_attention_to_ticker_not_symbol"),S=u.enabled("uppercase_instrument_names"),v=u.enabled("charting_library_single_symbol_request"),g=u.enabled("use_ticker_on_symbol_info_update"),y=u.enabled("hide_object_tree_and_price_scale_exchange_label"),f=[4,5,6,7,8],w=[4,5,6,7,11],C=[0,1,9,2,14,15,3,16,10,8,12,13],L=[2,14,15,10,3,13];function k(e){return{0:r.t(null,void 0,i(16812)),1:r.t(null,void 0,i(463528)),2:r.t(null,void 0,i(301277)),14:r.t(null,void 0,i(938397)),15:r.t(null,void 0,i(79511)),3:r.t(null,void 0,i(542097)),16:r.t(null,void 0,i(134911)),9:r.t(null,void 0,i(661582)),10:r.t(null,void 0,i(117712)),12:r.t(null,void 0,i(631994)),13:r.t(null,void 0,i(636018)),4:r.t(null,void 0,i(20801)),7:r.t(null,void 0,i(563492)),5:r.t(null,void 0,i(292901)),6:r.t(null,void 0,i(99969)),11:r.t(null,void 0,i(490357)),8:r.t(null,void 0,i(240530))}[e]}function T(e){return-1!==f.indexOf(e)}function W(e){return-1!==w.indexOf(e)}function I(e){return 11===e}function E(e){return-1!==C.indexOf(e)}function M(e){return W(e)||E(e)}function F(e){switch(e){case 3:case 10:case 2:case 14:case 15:case 13:return!0;default:return!1}}function N(e){return!o.SYMBOL_STRING_DATA[e]}function V(e,t){M(e)&&(11!==e&&n.setValue("chart.lastUsedStyle",e),N(e)&&A(e),be(t)&&F(e)&&n.setValue("chart.lastUsedSingleValueBasedStyle",e))}function A(e){n.setValue("chart.rawDataStyle",e)}function B(){const e=n.getInt("chart.lastUsedStyle");return void 0===e?1:e}function R(){const e=n.getInt("chart.lastUsedSingleValueBasedStyle");return void 0===e?14:e}function x(){return n.getInt("chart.rawDataStyle",1)}function G(e){return e?11:1}function D(e,t){const i=I(t),r=a.Interval.isRange(e);return!i&&r?G(!0):i&&!r?G(!1):t}function P(e,t){const i=o.SYMBOL_STRING_DATA[e];return void 0===i?null:t?`${i.type}-${i.basicStudyVersion}`:i.type}function O(e){const t=e.priceAxisProperties,i=t.lockScale.value(),r=6===e.style.value();(r||i)&&(t.log.setValue(!1),t.percentage.setValue(!1)),t.logDisabled.setValue(!(!r&&!i)),t.percentageDisabled.setValue(!(!r&&!i))}const U=[4,7,5,6];function Y(e){return-1!==U.indexOf(e)}function q(e){return L.includes(e)}function $(e,t="default",i=!1){let r,n,s,o=100,a=1;if("default"===t)null!=e&&(({pricescale:o,minmov:a,minmove2:n,fractional:r}=e),s=e.variable_tick_size||void 0);else{let e=t.split(",");3!==e.length&&(e=["100","1","false"]),o=parseInt(e[0]),a=parseInt(e[1]),r="true"===e[2]}return i&&(a=1),{priceScale:o,minMove:a,fractional:r,minMove2:n,variableMinTick:s,ignoreMinMove:i}}function z(e,t,i=!1){if("default"===t&&null!=e){const t=e.formatter||e.format;if("volume"===t)return new h.VolumeFormatter(2);if("percent"===t)return new d.PercentageFormatter(e.pricescale)}const{priceScale:r,minMove:n,fractional:s,minMove2:o,variableMinTick:a}=$(e,t,i);return new l.PriceFormatter(r,n,s,o,a,i)}function H(e){return null!==e&&"spread"!==e.type}function j(e,t,i){if(null===e)return null;const r=!t||i?e.currency_id:e.currency_code;return void 0===r||""===r||"pct"===r?null:r}function Z(e,t){const i=t?e.original_currency_code:e.original_currency_id
;return"pct"===i?null:null!=i?i:j(e,t)}function K(e){return e.base_currency_id||null}function X(e){return!(null===e||!H(e))&&(void 0!==e.original_currency_id&&e.original_currency_id!==e.currency_id)}function J(e,t){return t&&null!==e&&"spread"!==e.type}function Q(e,t){if(null===e||!t)return null;const i=e.unit_id;return void 0===i||""===i?null:i}function ee(e,t){return t?e.original_unit_id||Q(e,t):null}function te(e,t){return!(null===e||!J(e,t))&&(void 0!==e.original_unit_id&&e.original_unit_id!==e.unit_id)}function ie(e,t){return null!==e&&J(e,t)?e.unit_conversion_types||null:[]}function re(e){return"futures"===e.type&&e.front_contract||null}function ne(e){return null!==e&&void 0!==e.subsessions&&e.subsessions.some((e=>"premarket"===e.id||"postmarket"===e.id))}function se(e){return null!==e&&void 0!==e.subsessions&&e.subsessions.filter((e=>!e.private)).length>1}function oe(e){return null!==e&&("forex"===e.type||(0,m.isCFDSymbol)(e.type,e.typespecs)||(0,s.hasCryptoTypespec)(e.typespecs||[]))}function ae(e,t){let i=e&&(e.pro_name||e.full_name||e.name);return v&&t?i=t:g&&e&&e.ticker&&(i=e.ticker),S&&i&&(i=i.toUpperCase()),i}const le="·";function ue(e,t,i="exchange"){return t||y?e.name:`${e.name} ${le} ${e[i]}`}function ce(e){let t=e&&(re(e)||e.name)||"";return t.length>40&&(t=t.substring(0,37)+"..."),t.trim()}function he(e){const t=e?e.exchange:"";return S?t.toUpperCase():t}function de(e,t){return null!==e?e.full_name:t}function me(e,t){var i;return null!==(i=null==e?void 0:e.pro_name)&&void 0!==i?i:t}function _e(e,t){return b&&e?(0,c.ensureDefined)(e.ticker):de(e,t)}function pe(e){return"regular"===e||"us_regular"===e}function be(e){return"c"===(null==e?void 0:e.visible_plots_set)}function Se(e){return null!==e&&("unit"===e.measure&&null!==ve(e))}function ve(e){var t;return null!==(t=null==e?void 0:e.value_unit_id)&&void 0!==t?t:null}function ge(e){return void 0!==e.visible_plots_set&&"ohlcv"===e.visible_plots_set}function ye(e){return null!==e&&"economic"===e.type}function fe(e){return ye(e)&&e.source?e.source:e.exchange&&0!==e.exchange.length?e.exchange:void 0}function we(e){var t;return null!==e&&"futures"===e.type&&Boolean(e.has_backadjustment&&(null===(t=e.typespecs)||void 0===t?void 0:t.includes("continuous")))}function Ce(e){var t;return null!==e&&"futures"===e.type&&!Boolean(null===(t=e.typespecs)||void 0===t?void 0:t.includes("continuous"))}function Le(e){return(0,_.combine)(((t,i)=>{switch(t){case 4:{const t=e.seriesErrorMessage();return null!==t&&("resolution_not_entitled"===t||"custom_resolution"===t||"seconds_not_entitled"===t||t.startsWith("study_not_auth:"))?null:"invalid_symbol"}case 1:case 2:return null;default:if(i)return"no_data"}return null}),(0,p.createWVFromGetterAndSubscription)((()=>e.status()),e.onStatusChanged()).ownership(),(0,p.createWVFromGetterAndSubscription)((()=>!e.bars().size()&&!e.isInReplay()),e.dataEvents().dataUpdated()).ownership(),(0,p.createWVFromGetterAndSubscription)((()=>({})),e.model().onChartThemeLoaded()).ownership())}},502141:(e,t,i)=>{i.d(t,{areEqualSymbols:()=>o,
currenciesAreSame:()=>c,symbolSameAsCurrent:()=>l,unitsAreSame:()=>u});var r=i(77122),n=i(444331);const s=r.enabled("uppercase_instrument_names");function o(e,t){return void 0===e?void 0===t:void 0!==t&&(s?e.toUpperCase()===t.toUpperCase():e===t)}function a(e,t){return e.some((e=>o(t,e)))}function l(e,t){if(null===t)return!1;if(t){if(o(t.full_name,e)||o(t.pro_name,e))return!0;if(o(t.ticker,e))return!0;if(t.aliases&&a(t.aliases,e))return!0;if(t.alternatives&&a(t.alternatives,e))return!0;if(0===e.indexOf("FRA:")&&o(t.pro_name,e.replace("FRA:","FWB:")))return!0}return!1}function u(e,t,i){return null===e&&!(0,n.isConvertedToOtherUnit)(t,i)||e===(0,n.symbolUnit)(t,i)}function c(e,t){return null===e&&!(0,n.isConvertedToOtherCurrency)(t)||e===(0,n.symbolCurrency)(t)}}}]);