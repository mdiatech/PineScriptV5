
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  
<!-- Mirrored from www.tradingview.com/pine-script-docs/en/v5/concepts/Bar_plotting.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 04 Sep 2023 17:56:08 GMT -->
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Bar plotting &#8212; Pine Script® v5 User Manual v5 documentation</title>
    <link rel="stylesheet" href="../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../../../static.tradingview.com/static/bundles/pine-highlighter-v01.js"></script>
    <script type="text/javascript" src="../_static/highlight-pine-code.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Bar states" href="Bar_states.html" />
    <link rel="prev" title="Bar coloring" href="Bar_coloring.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Bar_states.html" title="Bar states"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Bar_coloring.html" title="Bar coloring"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Pine Script® v5 User Manual v5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Concepts</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="../index.html" class="text-logo">Pine Script<sup>®</sup> v5 User Manual</a>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Introduction.html">Welcome to Pine Script<sup>®</sup> v5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../primer/index.html">Pine Script<sup>®</sup> primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/index.html">Language</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Concepts</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Alerts.html">Alerts</a></li>
<li class="toctree-l2"><a class="reference internal" href="Backgrounds.html">Backgrounds</a></li>
<li class="toctree-l2"><a class="reference internal" href="Bar_coloring.html">Bar coloring</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Bar plotting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plotting-candles-with-plotcandle">Plotting candles with `plotcandle()`</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plotting-bars-with-plotbar">Plotting bars with `plotbar()`</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Bar_states.html">Bar states</a></li>
<li class="toctree-l2"><a class="reference internal" href="Chart_information.html">Chart information</a></li>
<li class="toctree-l2"><a class="reference internal" href="Colors.html">Colors</a></li>
<li class="toctree-l2"><a class="reference internal" href="Fills.html">Fills</a></li>
<li class="toctree-l2"><a class="reference internal" href="Inputs.html">Inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="Levels.html">Levels</a></li>
<li class="toctree-l2"><a class="reference internal" href="Libraries.html">Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="Lines_and_boxes.html">Lines and boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="Non-standard_charts_data.html">Non-standard charts data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plots.html">Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="Repainting.html">Repainting</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sessions.html">Sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Strategies.html">Strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tables.html">Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="Text_and_shapes.html">Text and shapes</a></li>
<li class="toctree-l2"><a class="reference internal" href="Time.html">Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="Timeframes.html">Timeframes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../writing/index.html">Writing scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Error_messages.html">Error messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guides/index.html">Migration guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Where_can_I_get_more_information.html">Where can I get more information?</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="https://www.tradingview.com/pine-script-docs/en/v5/search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../index.html">User Manual</a></li>
              
                <li><a href="index.html">Concepts</a></li>
              
              <li>Bar plotting</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <a class="reference external image-reference" href="../Introduction.html"><div align="right" class="align-right"><img alt="Pine Script® logo" height="100" src="../_images/Pine-script-logo.svg" width="100" /></div>
</a>
<div class="section" id="bar-plotting">
<span id="pagebarplotting"></span><h1>Bar plotting<a class="headerlink" href="#bar-plotting" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a></li>
<li><a class="reference internal" href="#plotting-candles-with-plotcandle" id="id2">Plotting candles with `plotcandle()`</a></li>
<li><a class="reference internal" href="#plotting-bars-with-plotbar" id="id3">Plotting bars with `plotbar()`</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_plotcandle">plotcandle()</a>
built-in function is used to plot candles.
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_plotbar">plotbar()</a>
is used to plot conventional bars.</p>
<p>Both functions require four arguments that will be used for the OHLC prices
(<a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_open">open</a>,
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_high">high</a>,
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_low">low</a>,
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_close">close</a>)
of the bars they will be plotting.
If one of those is <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a>, no bar is plotted.</p>
</div>
<div class="section" id="plotting-candles-with-plotcandle">
<h2><a class="toc-backref" href="#id2">Plotting candles with `plotcandle()`</a><a class="headerlink" href="#plotting-candles-with-plotcandle" title="Permalink to this headline">¶</a></h2>
<p>The signature of <a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_plotcandle">plotcandle()</a> is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>plotcandle(open, high, low, close, title, color, wickcolor, editable, show_last, bordercolor, display) → void
</pre></div>
</div>
<p>This plots simple candles, all in blue, using the habitual OHLC values, in a separate pane:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>//@version=5
indicator(&quot;Single-color candles&quot;)
plotcandle(open, high, low, close)
</pre></div>
</div>
<img alt="../_images/BarPlotting-Plotcandle-1.png" src="../_images/BarPlotting-Plotcandle-1.png" />
<p>To color them green or red, we can use the following code:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>//@version=5
indicator(&quot;Example 2&quot;)
paletteColor = close &gt;= open ? color.lime : color.red
plotbar(open, high, low, close, color = paletteColor)
</pre></div>
</div>
<img alt="../_images/BarPlotting-Plotcandle-2.png" src="../_images/BarPlotting-Plotcandle-2.png" />
<p>Note that the <code class="docutils literal notranslate"><span class="pre">color</span></code> parameter accepts “series color” arguments,
so constant values such as <code class="docutils literal notranslate"><span class="pre">color.red</span></code>, <code class="docutils literal notranslate"><span class="pre">color.lime</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;#FF9090&quot;</span></code>,
as well as expressions that calculate colors at runtime,
as is done with the <code class="docutils literal notranslate"><span class="pre">paletteColor</span></code> variable here, will all work.</p>
<p>You can build bars or candles using values other than the actual OHLC values.
For example you could calculate and plot smoothed candles using the following code,
which also colors wicks depending on the position of
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_close">close</a>
relative to the smoothed close (<code class="docutils literal notranslate"><span class="pre">c</span></code>) of our indicator:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>//@version=5
indicator(&quot;Smoothed candles&quot;, overlay = true)
lenInput = input.int(9)
smooth(source, length) =&gt;
    ta.sma(source, length)
o = smooth(open, lenInput)
h = smooth(high, lenInput)
l = smooth(low, lenInput)
c = smooth(close, lenInput)
ourWickColor = close &gt; c ? color.green : color.red
plotcandle(o, h, l, c, wickcolor = ourWickColor)
</pre></div>
</div>
<img alt="../_images/BarPlotting-Plotcandle-3.png" src="../_images/BarPlotting-Plotcandle-3.png" />
<p>You may find it useful to plot OHLC values taken from a
higher timeframe. You can, for example, plot daily bars on an intraday chart:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// NOTE: Use this script on an intraday chart.
//@version=5
indicator(&quot;Daily bars&quot;)

// Use gaps to only return data when the 1D timeframe completes, `na` otherwise.
[o, h, l, c] = request.security(syminfo.tickerid, &quot;D&quot;, [open, high, low, close], gaps = barmerge.gaps_on)

var color UP_COLOR = color.silver
var color DN_COLOR = color.blue
color wickColor = c &gt;= o ? UP_COLOR : DN_COLOR
color bodyColor = c &gt;= o ? color.new(UP_COLOR, 70) : color.new(DN_COLOR, 70)
// Only plot candles on intraday timeframes,
// and when non `na` values are returned by `request.security()` because a HTF has completed.
plotcandle(timeframe.isintraday ? o : na, h, l, c, color = bodyColor, wickcolor = wickColor)
</pre></div>
</div>
<img alt="../_images/BarPlotting-Plotcandle-4.png" src="../_images/BarPlotting-Plotcandle-4.png" />
<p>Note that:</p>
<ul>
<li><p class="first">We show the script’s plot after having used “Visual Order/Bring to Front” from the script’s “More” menu.
This causes our script’s candles to appear on top of the chart’s candles.</p>
</li>
<li><p class="first">The script will only display candles when two conditions are met:</p>
<blockquote>
<div><ul class="simple">
<li>The chart is using an intraday timeframe (see the check on <code class="docutils literal notranslate"><span class="pre">timeframe.isintraday</span></code> in the
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_plotcandle">plotcandle()</a> call).
We do this because it’s not useful to show a daily value on timeframes higher or equal to 1D.</li>
<li>The <a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_request{dot}security">request.security()</a>
function returns non <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a> values
(see <code class="docutils literal notranslate"><span class="pre">gaps</span> <span class="pre">=</span> <span class="pre">barmerge.gaps_on</span></code> in the function call).</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">We use a tuple (<code class="docutils literal notranslate"><span class="pre">[open,</span> <span class="pre">high,</span> <span class="pre">low,</span> <span class="pre">close]</span></code>) with
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_request{dot}security">request.security()</a>
to fetch four values in one call.</p>
</li>
<li><p class="first">We use <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_var">var</a> to declare our
<code class="docutils literal notranslate"><span class="pre">UP_COLOR</span></code> and <code class="docutils literal notranslate"><span class="pre">DN_COLOR</span></code> color constants on bar zero only. We use constants because those colors are used
in more than one place in our code. This way, if we need to change them, we need only do so in one place.</p>
</li>
<li><p class="first">We create a lighter transparency for the body of our candles in the <code class="docutils literal notranslate"><span class="pre">bodyColor</span></code> variable initialization,
so they don’t obstruct the chart’s candles.</p>
</li>
</ul>
</div>
<div class="section" id="plotting-bars-with-plotbar">
<h2><a class="toc-backref" href="#id3">Plotting bars with `plotbar()`</a><a class="headerlink" href="#plotting-bars-with-plotbar" title="Permalink to this headline">¶</a></h2>
<p>The signature of <a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_plotbar">plotbar()</a> is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>plotbar(open, high, low, close, title, color, editable, show_last, display) → void
</pre></div>
</div>
<p>Note that <a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_plotbar">plotbar()</a>
has no parameter for <code class="docutils literal notranslate"><span class="pre">bordercolor</span></code> or <code class="docutils literal notranslate"><span class="pre">wickcolor</span></code>, as there are no borders or wicks on conventional bars.</p>
<p>This plots conventional bars using the same coloring logic as in the second example of the previous section:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>//@version=5
indicator(&quot;Dual-color bars&quot;)
paletteColor = close &gt;= open ? color.lime : color.red
plotbar(open, high, low, close, color = paletteColor)
</pre></div>
</div>
<img alt="../_images/BarPlotting-Plotbar-1.png" src="../_images/BarPlotting-Plotbar-1.png" />
<a class="reference external image-reference" href="https://www.tradingview.com/"><div align="center" class="align-center"><img alt="../_images/TradingView-Logo-Block.svg" src="../_images/TradingView-Logo-Block.svg" width="200px" /></div>
</a>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="Bar_coloring.html" title="previous chapter (use the left arrow)">Bar coloring</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="Bar_states.html" title="next chapter (use the right arrow)">Bar states</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Bar_states.html" title="Bar states"
             >next</a> |</li>
        <li class="right" >
          <a href="Bar_coloring.html" title="Bar coloring"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Pine Script® v5 User Manual v5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Concepts</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>

<script type="text/javascript" src="../_static/js/theme.js"></script>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Options</span>
    v: v5
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Languages</dt>
      
        <strong>
        <dd><a href="Bar_plotting.html">en</a></dd>
        </strong>
      
    </dl>
    <dl>
      <dt>Versions</dt>
      
        
        <dd><a href="https://www.tradingview.com/pine-script-docs/en/v3/concepts/Bar_plotting.html">v3</a></dd>
        
      
        
        <dd><a href="https://www.tradingview.com/pine-script-docs/en/v4/concepts/Bar_plotting.html">v4</a></dd>
        
      
        <strong>
        <dd><a href="Bar_plotting.html">v5</a></dd>
        </strong>
      
    </dl>
  </div>
</div>
<script type="text/javascript">
    jQuery(function () {
        SphinxRtdTheme.Navigation.enable(false);
    });
</script>
  <div class="footer">
    &copy; Copyright 2023, TradingView.
  </div>
  </body>

<!-- Mirrored from www.tradingview.com/pine-script-docs/en/v5/concepts/Bar_plotting.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 04 Sep 2023 17:56:09 GMT -->
</html>