
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  
<!-- Mirrored from www.tradingview.com/pine-script-docs/en/v5/language/Operators.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 04 Sep 2023 17:56:02 GMT -->
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Operators &#8212; Pine Script® v5 User Manual v5 documentation</title>
    <link rel="stylesheet" href="../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../../../static.tradingview.com/static/bundles/pine-highlighter-v01.js"></script>
    <script type="text/javascript" src="../_static/highlight-pine-code.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Variable declarations" href="Variable_declarations.html" />
    <link rel="prev" title="Identifiers" href="Identifiers.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Variable_declarations.html" title="Variable declarations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Identifiers.html" title="Identifiers"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Pine Script® v5 User Manual v5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Language</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="../index.html" class="text-logo">Pine Script<sup>®</sup> v5 User Manual</a>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Introduction.html">Welcome to Pine Script<sup>®</sup> v5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../primer/index.html">Pine Script<sup>®</sup> primer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Language</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Execution_model.html">Execution model</a></li>
<li class="toctree-l2"><a class="reference internal" href="Time_series.html">Time series</a></li>
<li class="toctree-l2"><a class="reference internal" href="Script_structure.html">Script structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="Identifiers.html">Identifiers</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Operators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arithmetic-operators">Arithmetic operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#comparison-operators">Comparison operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logical-operators">Logical operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ternary-operator">`?:` ternary operator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#history-referencing-operator">`[ ]` history-referencing operator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#operator-precedence">Operator precedence</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignement-operator">`=` assignement operator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reassignement-operator">`:=` reassignement operator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Variable_declarations.html">Variable declarations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Conditional_structures.html">Conditional structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="Loops.html">Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="Type_system.html">Type system</a></li>
<li class="toctree-l2"><a class="reference internal" href="Built-ins.html">Built-ins</a></li>
<li class="toctree-l2"><a class="reference internal" href="User-defined_functions.html">User-defined functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Objects.html">Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="Methods.html">Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="Arrays.html">Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="Matrices.html">Matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="Maps.html">Maps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/index.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writing/index.html">Writing scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Error_messages.html">Error messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guides/index.html">Migration guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Where_can_I_get_more_information.html">Where can I get more information?</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="https://www.tradingview.com/pine-script-docs/en/v5/search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../index.html">User Manual</a></li>
              
                <li><a href="index.html">Language</a></li>
              
              <li>Operators</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <a class="reference external image-reference" href="../Introduction.html"><div align="right" class="align-right"><img alt="Pine Script® logo" height="100" src="../_images/Pine-script-logo.svg" width="100" /></div>
</a>
<div class="section" id="operators">
<span id="pageoperators"></span><h1>Operators<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a></li>
<li><a class="reference internal" href="#arithmetic-operators" id="id2">Arithmetic operators</a></li>
<li><a class="reference internal" href="#comparison-operators" id="id3">Comparison operators</a></li>
<li><a class="reference internal" href="#logical-operators" id="id4">Logical operators</a></li>
<li><a class="reference internal" href="#ternary-operator" id="id5">`?:` ternary operator</a></li>
<li><a class="reference internal" href="#history-referencing-operator" id="id6">`[ ]` history-referencing operator</a></li>
<li><a class="reference internal" href="#operator-precedence" id="id7">Operator precedence</a></li>
<li><a class="reference internal" href="#assignement-operator" id="id8">`=` assignement operator</a></li>
<li><a class="reference internal" href="#reassignement-operator" id="id9">`:=` reassignement operator</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Some operators are used to build <em>expressions</em> returning a result:</p>
<ul class="simple">
<li>Arithmetic operators</li>
<li>Comparison operators</li>
<li>Logical operators</li>
<li>The <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_{question}{colon}">?:</a> ternary operator</li>
<li>The <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_[]">[]</a> history-referencing operator</li>
</ul>
<p>Other operators are used to assign values to variables:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">=</span></code> is used to assign a value to a variable, <strong>but only when you declare the variable</strong> (the first time you use it)</li>
<li><code class="docutils literal notranslate"><span class="pre">:=</span></code> is used to assign a value to a <strong>previously declared variable</strong>. The following operators can also be used in such a way: <code class="docutils literal notranslate"><span class="pre">+=</span></code>, <code class="docutils literal notranslate"><span class="pre">-=</span></code>, <code class="docutils literal notranslate"><span class="pre">*=</span></code>, <code class="docutils literal notranslate"><span class="pre">/=</span></code>, <code class="docutils literal notranslate"><span class="pre">%=</span></code></li>
</ul>
<p>As is explained in the <a class="reference internal" href="Type_system.html#pagetypesystem"><span class="std std-ref">Type system</span></a> page, <em>forms</em> and <em>types</em> play a critical role in determining the type of results that expressions yield.
This, in turn, has an impact on how and with what functions you will be allowed to use those results.
Expressions always return a form of the strongest one used in the expression, e.g., if you multiply an “input int” with a “series int”,
the expression will produce a “series int” result, which you will not be able to use as the argument to <code class="docutils literal notranslate"><span class="pre">length</span></code> in
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_ta{dot}ema">ta.ema()</a>.</p>
<p>This script will produce a compilation error:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>//@version=5
indicator(&quot;&quot;)
lenInput = input.int(14, &quot;Length&quot;)
factor = year &gt; 2020 ? 3 : 1
adjustedLength = lenInput * factor
ma = ta.ema(close, adjustedLength)  // Compilation error!
plot(ma)
</pre></div>
</div>
<p>The compiler will complain: <em>Cannot call ‘ta.ema’ with argument ‘length’=’adjustedLength’. An argument of ‘series int’ type was used but a ‘simple int’ is expected;</em>.
This is happening because <code class="docutils literal notranslate"><span class="pre">lenInput</span></code> is an “input int” but <code class="docutils literal notranslate"><span class="pre">factor</span></code> is a “series int” (it can only be determined by looking at the value of
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_year">year</a> on each bar).
The <code class="docutils literal notranslate"><span class="pre">adjustedLength</span></code> variable is thus assigned a “series int” value.
Our problem is that the Reference Manual entry for <a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_ta{dot}ema">ta.ema()</a> tells us that its <code class="docutils literal notranslate"><span class="pre">length</span></code> parameter requires values of “simple” form, which is a weaker form that “series”, so a “series int” value is not allowed.</p>
<p>The solution to our conundrum requires:</p>
<ul class="simple">
<li>Using another moving average function that supports a “series int” length, such as <a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_ta{dot}sma">ta.sma()</a>, or</li>
<li>Not using a calculation producing a “series int” value for our length.</li>
</ul>
</div>
<div class="section" id="arithmetic-operators">
<span id="pageoperators-arithmeticoperators"></span><h2><a class="toc-backref" href="#id2">Arithmetic operators</a><a class="headerlink" href="#arithmetic-operators" title="Permalink to this headline">¶</a></h2>
<p>There are five arithmetic operators in Pine Script<sup>®</sup>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">+</span></code></td>
<td>Addition and string concatenation</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">-</span></code></td>
<td>Subtraction</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">*</span></code></td>
<td>Multiplication</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/</span></code></td>
<td>Division</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">%</span></code></td>
<td>Modulo (remainder after division)</td>
</tr>
</tbody>
</table>
<p>The arithmetic operators above are all binary (means they need two <em>operands</em> — or values — to work on, like in <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">2</span></code>).
The <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code> also serve as unary operators (means they work on one operand, like <code class="docutils literal notranslate"><span class="pre">-1</span></code> or <code class="docutils literal notranslate"><span class="pre">+1</span></code>).</p>
<p>If both operands are numbers but at least one of these is of <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_float">float</a> type,
the result will also be a <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_float">float</a>.
If both operands are of <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_int">int</a> type,
the result will also be an <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_int">int</a>.
If at least one operand is <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a>,
the result is also <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">+</span></code> operator also serves as the concatenation operator for strings. <code class="docutils literal notranslate"><span class="pre">&quot;EUR&quot;+&quot;USD&quot;</span></code> yields the <code class="docutils literal notranslate"><span class="pre">&quot;EURUSD&quot;</span></code> string.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">%</span></code> operator calculates the modulo by rounding down the quotient to the lowest possible value.
Here is an easy example that helps illustrate how the modulo is calculated behind the scenes:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>//@version=5
indicator(&quot;Modulo function&quot;)
modulo(series int a, series int b) =&gt;
    a - b * math.floor(nz(a/b))
plot(modulo(-1, 100))
</pre></div>
</div>
</div>
<div class="section" id="comparison-operators">
<span id="pageoperators-comparisonoperators"></span><h2><a class="toc-backref" href="#id3">Comparison operators</a><a class="headerlink" href="#comparison-operators" title="Permalink to this headline">¶</a></h2>
<p>There are six comparison operators in Pine Script<sup>®</sup>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;</span></code></td>
<td>Less Than</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code></td>
<td>Less Than or Equal To</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">!=</span></code></td>
<td>Not Equal</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">==</span></code></td>
<td>Equal</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&gt;</span></code></td>
<td>Greater Than</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></td>
<td>Greater Than or Equal To</td>
</tr>
</tbody>
</table>
<p>Comparison operations are binary. If both operands have a numerical value, the result will be of type <em>bool</em>, i.e., <code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code> or
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a>.</p>
<p>Examples</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1 &gt; 2  // false
1 != 1 // false
close &gt;= open  // Depends on values of `close` and `open`
</pre></div>
</div>
</div>
<div class="section" id="logical-operators">
<span id="pageoperators-logicaloperators"></span><h2><a class="toc-backref" href="#id4">Logical operators</a><a class="headerlink" href="#logical-operators" title="Permalink to this headline">¶</a></h2>
<p>There are three logical operators in Pine Script<sup>®</sup>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">not</span></code></td>
<td>Negation</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">and</span></code></td>
<td>Logical Conjunction</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">or</span></code></td>
<td>Logical Disjunction</td>
</tr>
</tbody>
</table>
<p>The operator <code class="docutils literal notranslate"><span class="pre">not</span></code> is unary. When applied to a <code class="docutils literal notranslate"><span class="pre">true</span></code>, operand the result will be <code class="docutils literal notranslate"><span class="pre">false</span></code>, and vice versa.</p>
<p><code class="docutils literal notranslate"><span class="pre">and</span></code> operator truth table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="31%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">a</th>
<th class="head">b</th>
<th class="head">a and b</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>true</td>
<td>true</td>
<td>true</td>
</tr>
<tr class="row-odd"><td>true</td>
<td>false</td>
<td>false</td>
</tr>
<tr class="row-even"><td>false</td>
<td>true</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>false</td>
<td>false</td>
<td>false</td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">or</span></code> operator truth table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="32%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">a</th>
<th class="head">b</th>
<th class="head">a or b</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>true</td>
<td>true</td>
<td>true</td>
</tr>
<tr class="row-odd"><td>true</td>
<td>false</td>
<td>true</td>
</tr>
<tr class="row-even"><td>false</td>
<td>true</td>
<td>true</td>
</tr>
<tr class="row-odd"><td>false</td>
<td>false</td>
<td>false</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="ternary-operator">
<span id="pageoperators-ternaryoperator"></span><h2><a class="toc-backref" href="#id5">`?:` ternary operator</a><a class="headerlink" href="#ternary-operator" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_{question}{colon}">?:</a> ternary operator is used to create expressions of the form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>condition ? valueWhenConditionIsTrue : valueWhenConditionIsFalse
</pre></div>
</div>
<p>The ternary operator returns a result that depends on the value of <code class="docutils literal notranslate"><span class="pre">condition</span></code>. If it is <code class="docutils literal notranslate"><span class="pre">true</span></code>,  then <code class="docutils literal notranslate"><span class="pre">valueWhenConditionIsTrue</span></code> is returned.
If <code class="docutils literal notranslate"><span class="pre">condition</span></code> is <code class="docutils literal notranslate"><span class="pre">false</span></code> or <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a>,  then <code class="docutils literal notranslate"><span class="pre">valueWhenConditionIsFalse</span></code> is returned.</p>
<p>A combination of ternary expressions can be used to achieve the same effect as a
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_switch">switch</a> structure, e.g.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>timeframe.isintraday ? color.red : timeframe.isdaily ? color.green : timeframe.ismonthly ? color.blue : na
</pre></div>
</div>
<p>The example is calculated from left to right:</p>
<ul class="simple">
<li>If <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_timeframe{dot}isintraday">timeframe.isintraday</a> is <code class="docutils literal notranslate"><span class="pre">true</span></code>,
then <code class="docutils literal notranslate"><span class="pre">color.red</span></code> is returned. If it is <code class="docutils literal notranslate"><span class="pre">false</span></code>, then <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_timeframe{dot}isdaily">timeframe.isdaily</a> is evaluated.</li>
<li>If <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_timeframe{dot}isdaily">timeframe.isdaily</a> is <code class="docutils literal notranslate"><span class="pre">true</span></code>,
then <code class="docutils literal notranslate"><span class="pre">color.green</span></code> is returned. If it is <code class="docutils literal notranslate"><span class="pre">false</span></code>,
then <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_timeframe{dot}ismonthly">timeframe.ismonthly</a> is evaluated.</li>
<li>If <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_timeframe{dot}ismonthly">timeframe.ismonthly</a> is <code class="docutils literal notranslate"><span class="pre">true</span></code>,
then <code class="docutils literal notranslate"><span class="pre">color.blue</span></code> is returned, otherwise <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a> is returned.</li>
</ul>
<p>Note that the return values on each side of the <code class="docutils literal notranslate"><span class="pre">:</span></code> are expressions — not local blocks, so they will not affect the limit of 500 local blocks per scope.</p>
</div>
<div class="section" id="history-referencing-operator">
<span id="pageoperators-historyreferencingoperator"></span><h2><a class="toc-backref" href="#id6">`[ ]` history-referencing operator</a><a class="headerlink" href="#history-referencing-operator" title="Permalink to this headline">¶</a></h2>
<p>It is possible to refer to past values of <a class="reference internal" href="Time_series.html#pagetimeseries"><span class="std std-ref">time series</span></a> using the
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_[]">[]</a> history-referencing operator.
Past values are values a variable had on bars preceding the bar where the script is currently executing — the <em>current bar</em>.
See the <a class="reference internal" href="Execution_model.html#pageexecutionmodel"><span class="std std-ref">Execution model</span></a> page for more information about the way scripts are executed on bars.</p>
<p>The <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_[]">[]</a> operator is used after a variable, expression or function call.
The value used inside the square brackets of the operator is the offset in the past we want to refer to.
To refer to the value of the <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_volume">volume</a>
built-in variable two bars away from the current bar, one would use <code class="docutils literal notranslate"><span class="pre">volume[2]</span></code>.</p>
<p>Because series grow dynamically, as the script moves on sucessive bars, the offset used with the operator will refer to different bars.
Let’s see how the value returned by the same offset is dynamic, and why series are very different from arrays.
In Pine Script<sup>®</sup>, the <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_close">close</a> variable, or <code class="docutils literal notranslate"><span class="pre">close[0]</span></code> which is equivalent,
holds the value of the current bar’s “close”.
If your code is now executing on the <strong>third</strong> bar of the <em>dataset</em> (the set of all bars on your chart), <code class="docutils literal notranslate"><span class="pre">close</span></code> will contain the price at the close of that bar,
<code class="docutils literal notranslate"><span class="pre">close[1]</span></code> will contain the price at the close of the preceding bar (the dataset’s second bar),
and <code class="docutils literal notranslate"><span class="pre">close[2]</span></code>, the first bar. <code class="docutils literal notranslate"><span class="pre">close[3]</span></code> will return <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a>
because no bar exists in that position, and thus its value is <em>not available</em>.</p>
<p>When the same code is executed on the next bar, the <strong>fourth</strong> in the dataset,
<code class="docutils literal notranslate"><span class="pre">close</span></code> will now contain the closing price of that bar, and the same <code class="docutils literal notranslate"><span class="pre">close[1]</span></code>
used in your code will now refer to the “close” of the third bar in the dataset.
The close of the first bar in the dataset will now be <code class="docutils literal notranslate"><span class="pre">close[3]</span></code>,
and this time <code class="docutils literal notranslate"><span class="pre">close[4]</span></code> will return <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a>.</p>
<p>In the Pine Script<sup>®</sup> runtime environment, as your code is executed once for each historical bar in the dataset,
starting from the left of the chart, Pine Script<sup>®</sup> is adding a new element in the series at index 0
and pushing the pre-existing elements in the series one index further away.
Arrays, in comparison, can have constant or variable sizes, and their content or indexing structure
is not modified by the runtime environment. Pine Script<sup>®</sup> series are thus very different from arrays and
only share familiarity with them through their indexing syntax.</p>
<p>When the market for the chart’s symbol is open and the script is executing on the chart’s last bar, the <em>realtime bar</em>,
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_close">close</a> returns the value of the current price.
It will only contain the actual closing price of the realtime bar the last time the script is executed on that bar, when it closes.</p>
<p>Pine Script<sup>®</sup> has a variable that contains the number of the bar the script is executing on:
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_bar_index">bar_index</a>.
On the first bar, <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_bar_index">bar_index</a>
is equal to 0 and it increases by 1 on each successive bar the script executes on.
On the last bar, <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_bar_index">bar_index</a> is equal to the number of bars in the dataset minus one.</p>
<p>There is another important consideration to keep in mind when using the <code class="docutils literal notranslate"><span class="pre">[]</span></code> operator in
Pine Script<sup>®</sup>. We have seen cases when a history reference may return the <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a>
value. <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a> represents a value which is not a number and
using it in any expression will produce a result that is also <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a> (similar
to <a class="reference external" href="https://en.wikipedia.org/wiki/NaN" rel="nofollow">NaN</a>).
Such cases often happen during the script’s calculations in the
early bars of the dataset, but can also occur in later bars under certain conditions.
If your code does not explicitly provide for handling these special cases,
they can introduce invalid results in your script’s calculations
which can ripple through all the way to the realtime bar.
The <a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_na">na</a> and
<a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_nz">nz</a> functions
are designed to allow for handling such cases.</p>
<p>These are all valid uses of the <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_[]">[]</a> operator:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>high[10]
ta.sma(close, 10)[1]
ta.highest(high, 10)[20]
close &gt; nz(close[1], open)
</pre></div>
</div>
<p>Note that the <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_[]">[]</a> operator can only be used once on the same value.
This is not allowed:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>close[1][2] // Error: incorrect use of [] operator
</pre></div>
</div>
</div>
<div class="section" id="operator-precedence">
<h2><a class="toc-backref" href="#id7">Operator precedence</a><a class="headerlink" href="#operator-precedence" title="Permalink to this headline">¶</a></h2>
<p>The order of calculations is determined by the operators’ precedence.
Operators with greater precedence are calculated first. Below is a list
of operators sorted by decreasing precedence:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Precedence</th>
<th class="head">Operator</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>9</td>
<td><code class="docutils literal notranslate"><span class="pre">[]</span></code></td>
</tr>
<tr class="row-odd"><td>8</td>
<td>unary <code class="docutils literal notranslate"><span class="pre">+</span></code>, unary <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">not</span></code></td>
</tr>
<tr class="row-even"><td>7</td>
<td><code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, <code class="docutils literal notranslate"><span class="pre">%</span></code></td>
</tr>
<tr class="row-odd"><td>6</td>
<td><code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code></td>
</tr>
<tr class="row-even"><td>5</td>
<td><code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code></td>
</tr>
<tr class="row-odd"><td>4</td>
<td><code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code></td>
</tr>
<tr class="row-even"><td>3</td>
<td><code class="docutils literal notranslate"><span class="pre">and</span></code></td>
</tr>
<tr class="row-odd"><td>2</td>
<td><code class="docutils literal notranslate"><span class="pre">or</span></code></td>
</tr>
<tr class="row-even"><td>1</td>
<td><code class="docutils literal notranslate"><span class="pre">?:</span></code></td>
</tr>
</tbody>
</table>
<p>If in one expression there are several operators with the same precedence,
then they are calculated left to right.</p>
<p>If the expression must be calculated in a different order than precedence would dictate,
then parts of the expression can be grouped together with parentheses.</p>
</div>
<div class="section" id="assignement-operator">
<span id="pageoperators-assignmentoperator"></span><h2><a class="toc-backref" href="#id8">`=` assignement operator</a><a class="headerlink" href="#assignement-operator" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">=</span></code> operator is used to assign a variable when it is initialized — or declared —, i.e., the first time you use it.
It says <em>this is a new variable that I will be using, and I want it to start on each bar with this value</em>.</p>
<p>These are all valid variable declarations:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>i = 1
MS_IN_ONE_MINUTE = 1000 * 60
showPlotInput = input.bool(true, &quot;Show plots&quot;)
pHi = pivothigh(5, 5)
plotColor = color.green
</pre></div>
</div>
<p>See the <a class="reference internal" href="Variable_declarations.html#pagevariabledeclarations"><span class="std std-ref">Variable declarations</span></a> page for more information on how to declare variables.</p>
</div>
<div class="section" id="reassignement-operator">
<span id="pageoperators-reassignmentoperator"></span><h2><a class="toc-backref" href="#id9">`:=` reassignement operator</a><a class="headerlink" href="#reassignement-operator" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">:=</span></code> is used to <em>reassign</em> a value to an existing variable.
It says <em>use this variable that was declared earlier in my script, and give it a new value</em>.</p>
<p>Variables which have been first declared, then reassigned using <code class="docutils literal notranslate"><span class="pre">:=</span></code>, are called <em>mutable</em> variables.
All the following examples are valid variable reassignments.
You will find more information on how <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_var">var</a> works in
the section on the <a class="reference internal" href="Variable_declarations.html#pagevariabledeclarations-var"><span class="std std-ref">`var` declaration mode</span></a>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>//@version=5
indicator(&quot;&quot;, &quot;&quot;, true)
// Declare `pHi` and initilize it on the first bar only.
var float pHi = na
// Reassign a value to `pHi`
pHi := nz(ta.pivothigh(5, 5), pHi)
plot(pHi)
</pre></div>
</div>
<p>Note that:</p>
<ul class="simple">
<li>We declare <code class="docutils literal notranslate"><span class="pre">pHi</span></code> with this code: <code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">float</span> <span class="pre">pHi</span> <span class="pre">=</span> <span class="pre">na</span></code>. The <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_var">var</a>
keyword tells Pine Script<sup>®</sup> that we only want that variable initialized with <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a> on the dataset’s first bar.
The <code class="docutils literal notranslate"><span class="pre">float</span></code> keyword tells the compiler we are declaring a variable of type “float”. This is necessary because, contrary to most cases,
the compiler cannot automatically determine the type of the value on the right side of the <code class="docutils literal notranslate"><span class="pre">=</span></code> sign.</li>
<li>While the variable declaration will only be executed on the first bar because it uses <a class="reference external" href="../../../../pine-script-reference/v5/index.html#op_var">var</a>,
the <code class="docutils literal notranslate"><span class="pre">pHi</span> <span class="pre">:=</span> <span class="pre">nz(ta.pivothigh(5,</span> <span class="pre">5),</span> <span class="pre">pHi)</span></code> line will be executed on all the chart’s bars.
On each bar, it evaluates if the <a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_ta{dot}pivothigh">pivothigh()</a>
call returns <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a> because that is what the function does when it hasn’t found a new pivot.
The <a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_nz">nz()</a>
function is the one doing the “checking for <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a>” part.
When its first argument (<code class="docutils literal notranslate"><span class="pre">ta.pivothigh(5,</span> <span class="pre">5)</span></code>) is <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a>,
it returns the second argument (<code class="docutils literal notranslate"><span class="pre">pHi</span></code>) instead of the first.
When <a class="reference external" href="../../../../pine-script-reference/v5/index.html#fun_ta{dot}pivothigh">pivothigh()</a> returns the price point of a newly found pivot,
that value is assigned to <code class="docutils literal notranslate"><span class="pre">pHi</span></code>. When it returns <a class="reference external" href="../../../../pine-script-reference/v5/index.html#var_na">na</a>
because no new pivot was found, we assign the previous value of <code class="docutils literal notranslate"><span class="pre">pHi</span></code> to itself, in effect preserving its previous value.</li>
</ul>
<p>The output of our script looks like this:</p>
<img alt="../_images/Operators-ReassignmentOperator-1.png" src="../_images/Operators-ReassignmentOperator-1.png" />
<p>Note that:</p>
<ul class="simple">
<li>The line preserves its previous value until a new pivot is found.</li>
<li>Pivots are detected five bars after the pivot actually occurs because our <code class="docutils literal notranslate"><span class="pre">ta.pivothigh(5,</span> <span class="pre">5)</span></code> call
says that we require five lower highs on both sides of a high point for it to be detected as a pivot.</li>
</ul>
<p>See the <a class="reference internal" href="Variable_declarations.html#pagevariabledeclarations-variablereassignment"><span class="std std-ref">Variable reassignment</span></a> section for more information on how to reassign values to variables.</p>
<a class="reference external image-reference" href="https://www.tradingview.com/"><div align="center" class="align-center"><img alt="../_images/TradingView-Logo-Block.svg" src="../_images/TradingView-Logo-Block.svg" width="200px" /></div>
</a>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="Identifiers.html" title="previous chapter (use the left arrow)">Identifiers</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="Variable_declarations.html" title="next chapter (use the right arrow)">Variable declarations</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Variable_declarations.html" title="Variable declarations"
             >next</a> |</li>
        <li class="right" >
          <a href="Identifiers.html" title="Identifiers"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Pine Script® v5 User Manual v5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Language</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>

<script type="text/javascript" src="../_static/js/theme.js"></script>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Options</span>
    v: v5
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Languages</dt>
      
        <strong>
        <dd><a href="Operators.html">en</a></dd>
        </strong>
      
    </dl>
    <dl>
      <dt>Versions</dt>
      
        
        <dd><a href="https://www.tradingview.com/pine-script-docs/en/v3/language/Operators.html">v3</a></dd>
        
      
        
        <dd><a href="https://www.tradingview.com/pine-script-docs/en/v4/language/Operators.html">v4</a></dd>
        
      
        <strong>
        <dd><a href="Operators.html">v5</a></dd>
        </strong>
      
    </dl>
  </div>
</div>
<script type="text/javascript">
    jQuery(function () {
        SphinxRtdTheme.Navigation.enable(false);
    });
</script>
  <div class="footer">
    &copy; Copyright 2023, TradingView.
  </div>
  </body>

<!-- Mirrored from www.tradingview.com/pine-script-docs/en/v5/language/Operators.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 04 Sep 2023 17:56:03 GMT -->
</html>